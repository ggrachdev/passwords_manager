(self.webpackChunk=self.webpackChunk||[]).push([[143],{8198:(e,t,n)=>{"use strict";var r=n(7294),o=n(3935),a=(n(8304),n(489),n(2419),n(8011),n(9070),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948),n(3727)),u=n(5977),c=n(5712),i=(n(9554),n(4747),n(8788)),l=n(9445),s=n(7746);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=n(251),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,o,a=y(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:e.errors||[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){b(this.props.errors,e.errors)||this.setState({errors:this.props.errors})}},{key:"render",value:function(){this.state.value;var e=[];return this.state.errors.forEach((function(t){e.push(r.createElement(i.Z,{error:!0,visible:!0,header:t.header,content:t.content}))})),r.createElement(r.Fragment,null,r.createElement(l.Z,{as:"h1"},"Вход:"),r.createElement(s.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(s.Z.Input,{fluid:!0,label:"Ваш email:",name:"email",required:!0,type:"email",placeholder:"Введите email"}),r.createElement(s.Z.Input,{fluid:!0,label:"Ваш пароль:",name:"password",required:!0,type:"password",placeholder:"Введите пароль"}),r.createElement(s.Z.Button,null,"Войти"),e))}}])&&p(t.prototype,n),o&&p(t,o),u}(r.Component);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formNode=t}var t,n,r;return t=e,(n=[{key:"getFormData",value:function(){return new FormData(this.formNode)}},{key:"getObject",value:function(){var e={};return this.getFormData().forEach((function(t,n){e[n]=t})),e}},{key:"getJson",value:function(){return JSON.stringify(this.getObject())}}])&&g(t.prototype,n),r&&g(t,r),e}();n(5666),n(8674),n(3710),n(9714),n(285);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_success=1==t.is_success,this.data=t.data,this.errors=t.errors}var t,n,r;return t=e,(n=[{key:"isSuccess",value:function(){return this.is_success}},{key:"isFailed",value:function(){return!1===this.is_success}},{key:"getData",value:function(){return this.data}},{key:"getErrors",value:function(){return this.errors}}])&&E(t.prototype,n),r&&E(t,r),e}();function O(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){O(a,r,o,u,c,"next",e)}function c(e){O(a,r,o,u,c,"throw",e)}u(void 0)}))}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a;return t=e,n=null,r=[{key:"login",value:(a=k(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._csrf_token=GlobalData.csrf.authenticate,e.next=3,fetch("/api/auth/login/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",new Promise((function(e,t){1==r.is_success?e(r):t(r)})));case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"registration",value:(o=k(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["registration_user_form[_csrf_token]"]=GlobalData.csrf.registration_user_form,e.next=3,fetch("/api/auth/registration/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,o=new S(r),e.abrupt("return",new Promise((function(e,t){o.isSuccess()?e(o):t(o)})));case 9:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&j(t.prototype,n),r&&j(t,r),e}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=n(251),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(u,e);var t,n,o,a=x(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:[]},t.onSubmitLoginForm=function(e){var n=new w(e.target).getObject();Z.login(n).then((function(e){location.href="/cabinet/",t.setState({errors:[]})})).catch((function(e){t.setState({errors:[{header:"Ошибка авторизации",content:"Не удалось авторизоваться"}]})}))},t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){F(e.errors,this.props.errors)||this.setState({errors:this.props.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.createElement(r.Fragment,null,r.createElement(c.Z,{text:!0},r.createElement(v,{errors:e,onSubmit:this.onSubmitLoginForm})))}}])&&C(t.prototype,n),o&&C(t,o),u}(r.Component),B=(n(6699),n(2023),n(2222),n(8309),n(9753),n(1038),n(7042),n(6973));function U(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){U(a,r,o,u,c,"next",e)}function c(e){U(a,r,o,u,c,"throw",e)}u(void 0)}))}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,u,c,i;return t=e,n=null,r=[{key:"add",value:(i=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["add_role_form[_csrf_token]"]=GlobalData.csrf.add_role_form,e.next=3,fetch("/api/roles/add/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"get",value:(c=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"getList",value:(u=D(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"remove",value:(a=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"update",value:(o=D(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["change_role_form[_csrf_token]"]=GlobalData.csrf.change_role_form,e.next=3,fetch("/api/roles/update/".concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})}],n&&L(t.prototype,n),r&&L(t,r),e}();function M(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){M(a,r,o,u,c,"next",e)}function c(e){M(a,r,o,u,c,"throw",e)}u(void 0)}))}}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,u,c;return t=e,n=null,r=[{key:"getList",value:(c=q(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"get",value:(u=q(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"set",value:(a=q(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["change_user_form[_csrf_token]"]=GlobalData.csrf.change_user_form,e.next=3,fetch("/api/users/set/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"remove",value:(o=q(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&H(t.prototype,n),r&&H(t,r),e}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(u,e);var t,n,o,a=$(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={all_roles_list:[],user_data:{id:"",email:"",first_name:"",middle_name:"",second_name:"",roles:[]},user_id:e.user_id,without_roles:"withoutRoles"in e,errors:e.errors||[],selected_roles:[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t.changeRolesRadioHandler=function(e,n){if(!0!==t.state.without_roles){var r=n.value,o=V(t.state.selected_roles),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_roles:a})}},G.get(e.user_id).then((function(e){t.setState({selected_roles:e.getData().user.roles,user_data:e.getData().user})})),z.getList().then((function(e){t.setState({all_roles_list:e.getData().roles})})),t}return t=u,(n=[{key:"render",value:function(){var e,t=this,n=this.state,o=(n.errors,n.all_roles_list),a=n.user_data,u=n.without_roles,c=r.createElement(s.Z.Button,null,"Изменить данные:");return r.createElement(r.Fragment,null,r.createElement(s.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(s.Z.Input,{fluid:!0,label:"Email:",required:"true",readOnly:u,name:"change_user_form[email]",type:"email",defaultValue:a.email,placeholder:"Введите email"}),r.createElement(s.Z.Input,{fluid:!0,label:"Отчество:",defaultValue:a.middle_name,required:"true",name:"change_user_form[middle_name]",type:"text",placeholder:"Введите отчество"}),r.createElement(s.Z.Input,{fluid:!0,label:"Имя:",defaultValue:a.first_name,required:"true",name:"change_user_form[first_name]",type:"text",placeholder:"Введите имя"}),r.createElement(s.Z.Input,{fluid:!0,label:"Фамилия:",defaultValue:a.second_name,required:"true",name:"change_user_form[second_name]",type:"text",placeholder:"Введите фамилию"}),r.createElement(s.Z.Input,{fluid:!0,label:"Введите пароль для его изменения:",name:"change_user_form[password]",type:"text",placeholder:"Введите пароль"}),r.createElement(s.Z.Input,{fluid:!0,label:"Повторите пароль для его изменения:",name:"change_user_form[re_password]",type:"text",placeholder:"Повторите пароль"}),r.createElement(l.Z,{as:"h4"},"Группы пользователя:"),(e=[],o.forEach((function(n){u?e.push(r.createElement(s.Z.Field,null,r.createElement(B.Z,{readOnly:!0,label:n.name,name:"change_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key}))):e.push(r.createElement(s.Z.Field,null,r.createElement(B.Z,{label:n.name,name:"change_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key})))})),e),c))}}])&&K(t.prototype,n),o&&K(t,o),u}(r.Component),ee=n(8588),te=n.n(ee);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=n(251),le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(u,e);var t,n,o,a=ae(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={global_state:e.global_state,errors:[]},t.onSubmitUserChangeForm=function(e){var n=new w(e.target).getObject();n["change_user_form[password]"]===n["change_user_form[re_password]"]?G.set(t.state.global_state.user_id,n).then((function(e){t.setState({modal_edit_user_is_open:!1}),te()({text:"Данные пользователя успешно изменены",backgroundColor:"green",duration:3e3}).showToast(),t.initialize()})).catch((function(){te()({text:"При изменении данных что-то пошло не так",backgroundColor:"darkred",duration:3e3}).showToast(),location.reload()})):te()({text:"Пароли не совпадают",backgroundColor:"darkred",duration:3e3}).showToast()},t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){ie(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"render",value:function(){var e=this.state,t=(e.errors,e.global_state);return r.createElement(r.Fragment,null,r.createElement(c.Z,null,r.createElement(l.Z,{as:"h1"},"Ваши данные:"),r.createElement(Y,{withoutRoles:!0,user_id:t.user_id,onSubmit:this.onSubmitUserChangeForm})))}}])&&re(t.prototype,n),o&&re(t,o),u}(r.Component),se=n(692),fe=n(8188),pe=n(8237),me=n(5382),ye=n(4631);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(u,e);var t,n,o,a=ge(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={roles:[],errors:e.errors||[],selected_roles:[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t.changeRolesRadioHandler=function(e,n){var r=n.value,o=he(t.state.selected_roles),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_roles:a})},z.getList().then((function(e){t.setState({roles:e.getData().roles})})),t}return t=u,(n=[{key:"render",value:function(){var e,t=this,n=this.state,o=(n.errors,n.roles);return r.createElement(r.Fragment,null,r.createElement(s.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(s.Z.Input,{fluid:!0,label:"Email:",required:!0,name:"registration_user_form[email]",type:"email",placeholder:"Введите email"}),r.createElement(s.Z.Input,{fluid:!0,label:"Отчество:",required:!0,name:"registration_user_form[middle_name]",type:"text",placeholder:"Введите отчество"}),r.createElement(s.Z.Input,{fluid:!0,label:"Имя:",required:!0,name:"registration_user_form[first_name]",type:"text",placeholder:"Введите имя"}),r.createElement(s.Z.Input,{fluid:!0,label:"Фамилия:",required:!0,name:"registration_user_form[second_name]",type:"text",placeholder:"Введите фамилию"}),r.createElement(s.Z.Input,{fluid:!0,label:"Пароль для входа:",required:!0,name:"registration_user_form[password]",type:"text",placeholder:"Введите пароль"}),r.createElement(s.Z.Input,{fluid:!0,label:"Повторите пароль:",required:!0,name:"registration_user_form[re_password]",type:"text",placeholder:"Повторите пароль"}),(e=[],o.forEach((function(n){e.push(r.createElement(s.Z.Field,null,r.createElement(B.Z,{label:n.name,name:"registration_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key})))})),e),r.createElement(s.Z.Button,null,"Зарегистрировать пользователя")))}}])&&_e(t.prototype,n),o&&_e(t,o),u}(r.Component);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=n(251),xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(u,e);var t,n,o,a=Ze(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={global_state:e.global_state,errors:[],users:[],user_id_for_update:null,user_id_for_delete:null,user_name_for_delete:null,modal_delete_user_is_open:!1,modal_edit_user_is_open:!1,modal_registration_is_open:!1},t.onSubmitUserChangeForm=function(e){var n=new w(e.target).getObject();n["change_user_form[password]"]===n["change_user_form[re_password]"]?G.set(t.state.user_id_for_update,n).then((function(e){t.setState({modal_edit_user_is_open:!1}),te()({text:"Данные пользователя успешно изменены",backgroundColor:"green",duration:3e3}).showToast(),t.initialize()})).catch((function(){te()({text:"При изменении данных что-то пошло не так",backgroundColor:"darkred",duration:3e3}).showToast(),location.reload()})):te()({text:"Пароли не совпадают",backgroundColor:"darkred",duration:3e3}).showToast()},t.onSubmitRegistrationForm=function(e){var n=new w(e.target).getObject();n["registration_user_form[password]"]===n["registration_user_form[re_password]"]?Z.registration(n).then((function(e){t.setState({modal_registration_is_open:!1}),te()({text:"Пользователь успешно зарегистрирован",backgroundColor:"green",duration:3e3}).showToast(),t.initialize()})).catch((function(e){te()({text:"Не удалось зарегистрировать пользователя",backgroundColor:"darkred",duration:3e3}).showToast()})):te()({text:"Пароли не совпадают",backgroundColor:"darkred",duration:3e3}).showToast()},t.openModalChangeUser=function(){return t.setState({modal_edit_user_is_open:!0})},t.closeModalChangeUser=function(){return t.setState({modal_edit_user_is_open:!1})},t.openModalAddUser=function(){return t.setState({modal_registration_is_open:!0})},t.closeModalAddUser=function(){return t.setState({modal_registration_is_open:!1})},t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){var e=this;G.getList().then((function(t){e.setState({users:t.getData().users})}))}},{key:"componentDidUpdate",value:function(e){Pe(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.errors,t.users),o=t.user_id_for_update,a=t.modal_registration_is_open,u=t.modal_delete_user_is_open,i=t.modal_edit_user_is_open,s=t.user_name_for_delete,f=[];return n.forEach((function(t){var n=[];t.roles_full.forEach((function(e){n.push(r.createElement(se.Z,{color:e.color,style:{backgroundColor:e.color,color:"#ffffff"}},e.name))})),f.push(r.createElement(fe.Z,null,r.createElement(fe.Z.Content,null,r.createElement(fe.Z.Header,null,t.second_name," ",t.first_name," ",t.middle_name),r.createElement(fe.Z.Meta,null,t.email),r.createElement(fe.Z.Description,null,r.createElement(pe.Z,{onClick:function(){e.setState({user_id_for_update:t.id,modal_edit_user_is_open:!0})},basic:!0,color:"blue",size:"mini"},r.createElement(me.Z,{name:"edit"}),"Изменить"),r.createElement(pe.Z,{basic:!0,color:"violet",size:"mini"},r.createElement(me.Z,{name:"shield alternate"}),"Скомпрометировать пароли"),r.createElement(pe.Z,{onClick:function(){e.setState({user_name_for_delete:"".concat(t.second_name," ").concat(t.first_name," ").concat(t.middle_name),user_id_for_delete:t.id,modal_delete_user_is_open:!0})},basic:!0,color:"red",size:"mini"},r.createElement(me.Z,{name:"remove"}),"Удалить")),r.createElement(fe.Z.Extra,null,n))))})),r.createElement(c.Z,null,r.createElement(l.Z,{as:"h1"},"Пользователи:"),r.createElement(fe.Z.Group,{divided:!0},f),r.createElement(ye.Z,{open:a,trigger:r.createElement(pe.Z,{onClick:this.openModalAddUser},"Добавить пользователя")},r.createElement(ye.Z.Header,null,"Добавить пользователя"),r.createElement(ye.Z.Content,null,r.createElement(Se,{onSubmit:this.onSubmitRegistrationForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.closeModalAddUser},"Закрыть окно"))),r.createElement(ye.Z,{open:i},r.createElement(ye.Z.Header,null,"Изменить данные пользователя"),r.createElement(ye.Z.Content,null,r.createElement(Y,{user_id:o,onSubmit:this.onSubmitUserChangeForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.closeModalChangeUser},"Закрыть окно"))),r.createElement(ye.Z,{open:u,header:"Вы действительно хотите удалить пользователя ".concat(s,"?"),actions:[{key:"no",content:"Нет",positive:!1,onClick:function(){e.setState({modal_delete_user_is_open:!1})}},{key:"done",content:"Да",positive:!0,onClick:function(){G.remove(e.state.user_id_for_delete).then((function(){e.setState({modal_delete_user_is_open:!1}),te()({text:"Пользователь ".concat(s," успешно удален"),backgroundColor:"green",duration:3e3}).showToast(),e.initialize()})).catch((function(){te()({text:"Не удалось удалить пользователя - ".concat(s),backgroundColor:"darkred",duration:3e3}).showToast()}))}}]}))}}])&&ke(t.prototype,n),o&&ke(t,o),u}(r.Component);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(u,e);var t,n,o,a=Ae(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:e.errors||[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=u,(n=[{key:"render",value:function(){return this.state.errors,r.createElement(r.Fragment,null,r.createElement(s.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(s.Z.Input,{fluid:!0,label:"Идентификатор роли:",required:"true",name:"add_role_form[role_key]",type:"text",placeholder:"Введите идентификатор роли"}),r.createElement(s.Z.Input,{fluid:!0,label:"Название роли:",required:"true",name:"add_role_form[name]",type:"text",placeholder:"Введите название роли"}),r.createElement(s.Z.Input,{fluid:!0,label:"Цвет роли:",required:"true",name:"add_role_form[color]",type:"text",placeholder:"Введите цвет роли"}),r.createElement(s.Z.Button,null,"Добавить роль")))}}])&&Ie(t.prototype,n),o&&Ie(t,o),u}(r.Component);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(u,e);var t,n,o,a=qe(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:e.errors||[],key_role_for_change:e.keyRoleForChange,role_data:{key:"",name:"",color:""}},z.get(t.state.key_role_for_change).then((function(e){t.setState({role_data:e.getData().role})})),t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=u,(n=[{key:"render",value:function(){var e=this.state,t=(e.errors,e.role_data);return r.createElement(r.Fragment,null,r.createElement(s.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(s.Z.Input,{fluid:!0,label:"Идентификатор роли:",required:"true",readOnly:!0,defaultValue:t.key,name:"change_role_form[role_key]",type:"text",placeholder:"Введите идентификатор роли"}),r.createElement(s.Z.Input,{fluid:!0,label:"Название роли:",defaultValue:t.name,required:"true",name:"change_role_form[name]",type:"text",placeholder:"Введите название роли"}),r.createElement(s.Z.Input,{fluid:!0,label:"Цвет роли:",defaultValue:t.color,required:"true",name:"change_role_form[color]",type:"text",placeholder:"Введите цвет роли"}),r.createElement(s.Z.Button,null,"Изменить роль")))}}])&&ze(t.prototype,n),o&&ze(t,o),u}(r.Component);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(u,e);var t,n,o,a=Je(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={global_state:e.global_state,errors:[],roles:[],modal_add_role_is_open:!1,modal_update_role_is_open:!1,modal_delete_role_is_open:!1,role_name_for_update:null,role_key_for_update:null,role_name_for_delete:null,role_key_for_delete:null},t.onChangeRoleForm=function(e){var n=new w(e.target).getObject();z.update(n,t.state.role_key_for_update).then((function(e){t.setState({modal_update_role_is_open:!1}),te()({text:"Роль успешно изменена",backgroundColor:"green",duration:3e3}).showToast(),t.initialize()})).catch((function(){te()({text:"Не удалось изменить роль",backgroundColor:"darkred",duration:3e3}).showToast()}))},t.onAddRoleForm=function(e){var n=new w(e.target).getObject();z.add(n).then((function(e){t.setState({modal_add_role_is_open:!1}),te()({text:"Роль успешно добавлена",backgroundColor:"green",duration:3e3}).showToast(),t.initialize()})).catch((function(){te()({text:"Не удалось добавить роль",backgroundColor:"darkred",duration:3e3}).showToast()}))},t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){var e=this;z.getList().then((function(t){e.setState({roles:t.getData().roles})}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.errors,t.roles),o=t.modal_add_role_is_open,a=t.modal_delete_role_is_open,u=t.modal_update_role_is_open,i=t.role_name_for_delete,s=(t.role_name_for_update,[]);n.forEach((function(t){var n=r.createElement(se.Z,{size:"large",color:t.color,style:{backgroundColor:t.color,color:"#ffffff"}},t.name),o=[];o.push(r.createElement(pe.Z,{onClick:function(){e.setState({role_name_for_update:t.name,role_key_for_update:t.key,modal_update_role_is_open:!0})},basic:!0,color:"blue",size:"mini"},r.createElement(me.Z,{name:"edit"}),"Изменить")),["ROLE_ADMIN","ROLE_USER"].includes(t.key)||o.push(r.createElement(pe.Z,{onClick:function(){e.setState({role_name_for_delete:t.name,role_key_for_delete:t.key,modal_delete_role_is_open:!0})},basic:!0,color:"red",size:"mini"},r.createElement(me.Z,{name:"remove"}),"Удалить")),s.push(r.createElement(fe.Z,null,r.createElement(fe.Z.Content,null,r.createElement(fe.Z.Header,null,n),r.createElement(fe.Z.Description,null,o))))}));var f=r.createElement(ye.Z,{open:u},r.createElement(ye.Z.Header,null,"Изменить роль"),r.createElement(ye.Z.Content,null,r.createElement(Ne,{keyRoleForChange:this.state.role_key_for_update,onSubmit:this.onChangeRoleForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_update_role_is_open:!1})}},"Закрыть окно"))),p=r.createElement(ye.Z,{open:o,trigger:r.createElement(pe.Z,{onClick:function(){e.setState({modal_add_role_is_open:!0})}},"Добавить роль")},r.createElement(ye.Z.Header,null,"Добавить роль"),r.createElement(ye.Z.Content,null,r.createElement(De,{onSubmit:this.onAddRoleForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_add_role_is_open:!1})}},"Закрыть окно"))),m=r.createElement(ye.Z,{open:a,header:"Вы действительно хотите удалить роль - ".concat(i,"?"),actions:[{key:"no",content:"Нет",positive:!1,onClick:function(){e.setState({modal_delete_role_is_open:!1})}},{key:"done",content:"Да",positive:!0,onClick:function(){z.remove(e.state.role_key_for_delete).then((function(){te()({text:"Роль ".concat(i," успешно удалена"),backgroundColor:"green",duration:3e3}).showToast(),e.setState({modal_delete_role_is_open:!1}),e.initialize()}))}}]});return r.createElement(c.Z,null,r.createElement(l.Z,{as:"h1"},"Роли:"),r.createElement(fe.Z.Group,{divided:!0},s),f,p,m)}}])&&We(t.prototype,n),o&&We(t,o),u}(r.Component),Ye=n(284),et=n(1300),tt=n(4309),nt=n(416);function rt(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a;return t=e,n=null,r=[{key:"getList",value:(o=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/projects/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function u(e){rt(a,n,r,u,c,"next",e)}function c(e){rt(a,n,r,u,c,"throw",e)}u(void 0)}))},function(){return a.apply(this,arguments)})}],n&&ot(t.prototype,n),r&&ot(t,r),e}();n(2772),n(4916),n(5306);function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"string",value:function(t,n){var r=!1;if("string"==typeof t&&"string"==typeof n&&(n.length>0&&(r=-1!==t.toLowerCase().indexOf(n.toLowerCase())),!1===r)){var o=e.stringToRussianKeyboard(n.toLowerCase());r=-1!==t.toLowerCase().indexOf(o.toLowerCase())}return r}},{key:"stringToRussianKeyboard",value:function(e){var t={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":"."};return e.replace(/[A-z/,.;\'\]\[]/g,(function(e){return e==e.toLowerCase()?t[e]:t[e.toLowerCase()].toUpperCase()}))}}],(n=null)&&ut(t.prototype,n),r&&ut(t,r),e}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(u,e);var t,n,o,a=ft(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:[],activeFolder:null,activeProject:null,projects:[],searchString:""},t.onChangeSearchProjects=function(e){t.setState({searchString:e.target.value})},at.getList().then((function(e){t.setState({projects:e.getData().projects})})),t.renderMenu=function(){var e=[],n=t.state.searchString;return t.state.projects.forEach((function(o){var a=[],u=ct.string(o.name,n),c=!1;o.folders.forEach((function(e){!1===c&&(c=ct.string(e.name,n)),a.push(r.createElement(Ye.Z.Item,{name:e.name,active:t.state.activeFolder===e.name&&t.state.activeProject===o.name,onClick:function(){t.setState({activeProject:o.name,activeFolder:e.name})}}))})),n.length>0&&!u&&!c||e.push(r.createElement(Ye.Z.Item,null,r.createElement(Ye.Z.Header,null,o.name," ",r.createElement(me.Z,{className:"icon_edit_project",size:"small",color:"grey",link:!0,name:"edit"}),r.createElement(me.Z,{className:"icon_edit_project",size:"small",color:"grey",link:!0,name:"add circle"})),r.createElement(Ye.Z.Menu,null,a)))})),e},t}return t=u,(n=[{key:"render",value:function(){for(var e=this.state,t=(e.errors,e.activeFolder,[]),n=0;n<=50;n++)t.push(r.createElement(et.Z.Row,null,r.createElement(et.Z.Cell,null,"Пароль от ФТП ",n),r.createElement(et.Z.Cell,null,"testLogin"),r.createElement(et.Z.Cell,null,"password"),r.createElement(et.Z.Cell,null,"Заходить через порт 22")));return r.createElement(r.Fragment,null,r.createElement(c.Z,null,r.createElement(l.Z,{as:"h1"},"Проекты:"),r.createElement(tt.Z,{divided:!0},r.createElement(tt.Z.Row,null,r.createElement(tt.Z.Column,{width:4},r.createElement(nt.Z,{onChange:this.onChangeSearchProjects,className:"w100p",placeholder:"Поиск..."}),r.createElement(Ye.Z,{size:"large",vertical:!0,className:"w100p"},this.renderMenu())),r.createElement(tt.Z.Column,{width:12},r.createElement(et.Z,{celled:!0},r.createElement(et.Z.Header,null,r.createElement(et.Z.Row,null,r.createElement(et.Z.HeaderCell,null,"Название"),r.createElement(et.Z.HeaderCell,null,"Логин"),r.createElement(et.Z.HeaderCell,null,"Пароль"),r.createElement(et.Z.HeaderCell,null,"Пояснение"))),r.createElement(et.Z.Body,null,t)))))))}}])&&lt(t.prototype,n),o&&lt(t,o),u}(r.Component);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt(e);if(t){var o=gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(u,e);var t,n,o,a=_t(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={errors:[]},t}return t=u,(n=[{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(c.Z,null,r.createElement(l.Z,{as:"h1"},"История действий:")))}}])&&ht(t.prototype,n),o&&ht(t,o),u}(r.Component);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zt(e);if(t){var o=Zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rt=n(251),Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(i,e);var t,n,o,u=kt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=u.call(this,e)).state={path:location.pathname,global_state:e.global_state},t.handlers={changeMenuItem:function(e){t.setState({path:e.target.getAttribute("href")})}},t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){Rt(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"renderMenu",value:function(){var e=this.state,t=e.path,n=e.global_state,o=[];return n.user_is_auth?(o.push(r.createElement(Ye.Z.Item,{name:"cabinet",to:"/cabinet/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/cabinet/"===t},r.createElement(me.Z,{name:"user circle"}),n.user_name," ",n.user_second_name)),o.push(r.createElement(Ye.Z.Item,{name:"projects",to:"/projects/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/projects/"===t},r.createElement(me.Z,{name:"briefcase"}),"Проекты")),o.push(r.createElement(Ye.Z.Item,{name:"history",to:"/history/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/history/"===t},r.createElement(me.Z,{name:"history"}),"История")),n.user_roles.includes("ROLE_ADMIN")&&(o.push(r.createElement(Ye.Z.Item,{name:"users",to:"/users/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/users/"===t},r.createElement(me.Z,{name:"user"}),"Пользователи")),o.push(r.createElement(Ye.Z.Item,{name:"roles",to:"/roles/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/roles/"===t},r.createElement(me.Z,{name:"users"}),"Роли"))),o.push(r.createElement(Ye.Z.Item,{name:"logout",onClick:function(){location.href="/logout"},as:a.rU},r.createElement(me.Z,{name:"sign-out"}),"Выход"))):o.push(r.createElement(Ye.Z.Item,{name:"login",onClick:this.handlers.changeMenuItem,active:"/"===t},r.createElement(me.Z,{name:"sign-in"}),"Вход")),o}},{key:"render",value:function(){return r.createElement(Ye.Z,{inverted:!0,color:"blue"},r.createElement(c.Z,null,this.renderMenu()))}}])&&St(t.prototype,n),o&&St(t,o),i}(r.Component),Pt=n(7401),xt=n(849);function Tt(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a;return t=e,n=null,r=[{key:"get",value:(o=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/global_state/get/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function u(e){Tt(a,n,r,u,c,"next",e)}function c(e){Tt(a,n,r,u,c,"throw",e)}u(void 0)}))},function(){return a.apply(this,arguments)})}],n&&It(t.prototype,n),r&&It(t,r),e}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var o=zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(l,e);var t,n,o,i=Dt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={app_is_initialized:!1,global_state:null},Ft.get().then((function(e){t.setState({global_state:e,app_is_initialized:!0})})),t}return t=l,(n=[{key:"render",value:function(){var e=this.state,t=e.app_is_initialized,n=e.global_state;return t?r.createElement(a.VK,null,r.createElement(Ct,{global_state:n}),r.createElement("br",null),r.createElement(u.rs,null,r.createElement(u.AW,{path:"/cabinet/"},r.createElement(le,{global_state:n})),r.createElement(u.AW,{path:"/users/"},r.createElement(xe,{global_state:n})),r.createElement(u.AW,{path:"/roles/"},r.createElement(Xe,{global_state:n})),r.createElement(u.AW,{path:"/projects/"},r.createElement(yt,{global_state:n})),r.createElement(u.AW,{path:"/history/"},r.createElement(wt,{global_state:n})),r.createElement(u.AW,{path:"/"},r.createElement(A,{global_state:n}))),r.createElement("br",null)):r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(c.Z,null,r.createElement(Pt.Z,{active:!0,inverted:!0},r.createElement(xt.Z,{inverted:!0},"Загрузка"))))}}])&&Bt(t.prototype,n),o&&Bt(t,o),l}(r.Component);n(6486);o.render(r.createElement(Mt,null),document.getElementById("app"))},4654:()=>{}},e=>{"use strict";e.O(0,[907],(()=>{return t=8198,e(e.s=t);var t}));e.O()}]);