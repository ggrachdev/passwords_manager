(self.webpackChunk=self.webpackChunk||[]).push([[143],{4763:(e,t,n)=>{"use strict";n(6519);var r=n(7294),o=n(3935),a=(n(6699),n(2023),n(2564),n(4916),n(4723),n(8304),n(489),n(2419),n(8011),n(9070),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948),n(3727)),c=n(5977),i=n(5712),s=(n(9554),n(4747),n(8788)),u=n(9445),l=n(8070);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=n(251),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,o,a=m(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){b(this.props.errors,e.errors)||this.setState({errors:this.props.errors})}},{key:"render",value:function(){this.state.value;var e=[];return this.state.errors.forEach((function(t){e.push(r.createElement(s.Z,{error:!0,visible:!0,header:t.header,content:t.content}))})),r.createElement(r.Fragment,null,r.createElement(u.Z,{as:"h1"},"Вход:"),r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Ваш email:",name:"email",required:!0,type:"email",placeholder:"Введите email"}),r.createElement(l.Z.Input,{fluid:!0,label:"Ваш пароль:",name:"password",required:!0,type:"password",placeholder:"Введите пароль"}),r.createElement(l.Z.Button,{positive:!0},"Войти"),e))}}])&&p(t.prototype,n),o&&p(t,o),c}(r.Component);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formNode=t}var t,n,r;return t=e,(n=[{key:"getFormData",value:function(){return new FormData(this.formNode)}},{key:"getObject",value:function(){var e={};return this.getFormData().forEach((function(t,n){e[n]=t})),e}},{key:"getJson",value:function(){return JSON.stringify(this.getObject())}}])&&g(t.prototype,n),r&&g(t,r),e}();n(5666),n(8674),n(3710),n(9714),n(285);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_success=1==t.is_success,this.data=t.data,this.errors=t.errors}var t,n,r;return t=e,(n=[{key:"isSuccess",value:function(){return this.is_success}},{key:"isFailed",value:function(){return!1===this.is_success}},{key:"getData",value:function(){return this.data}},{key:"getErrors",value:function(){return this.errors}}])&&E(t.prototype,n),r&&E(t,r),e}();function j(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){j(a,r,o,c,i,"next",e)}function i(e){j(a,r,o,c,i,"throw",e)}c(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a;return t=e,n=null,r=[{key:"login",value:(a=P(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._csrf_token=GlobalData.csrf.authenticate,e.next=3,fetch("/api/auth/login/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",new Promise((function(e,t){1==r.is_success?e(r):t(r)})));case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"registration",value:(o=P(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["registration_user_form[_csrf_token]"]=GlobalData.csrf.registration_user_form,e.next=3,fetch("/api/auth/registration/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,o=new S(r),e.abrupt("return",new Promise((function(e,t){o.isSuccess()?e(o):t(o)})));case 9:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&O(t.prototype,n),r&&O(t,r),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=n(251),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(c,e);var t,n,o,a=x(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:[]},t.onSubmitLoginForm=function(e){var n=new w(e.target).getObject();k.login(n).then((function(e){location.href="/cabinet/",t.setState({errors:[]})})).catch((function(e){t.setState({errors:[{header:"Ошибка авторизации",content:"Не удалось авторизоваться"}]})}))},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){T(e.errors,this.props.errors)||this.setState({errors:this.props.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.createElement(r.Fragment,null,r.createElement(i.Z,{text:!0},r.createElement(v,{errors:e,onSubmit:this.onSubmitLoginForm})))}}])&&R(t.prototype,n),o&&R(t,o),c}(r.Component),B=(n(2222),n(8309),n(9753),n(1038),n(7042),n(6973));function L(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){L(a,r,o,c,i,"next",e)}function i(e){L(a,r,o,c,i,"throw",e)}c(void 0)}))}}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,c,i,s;return t=e,n=null,r=[{key:"add",value:(s=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["add_role_form[_csrf_token]"]=GlobalData.csrf.add_role_form,e.next=3,fetch("/api/roles/add/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"get",value:(i=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getList",value:(c=D(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"remove",value:(a=D(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/roles/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"update",value:(o=D(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["change_role_form[_csrf_token]"]=GlobalData.csrf.change_role_form,e.next=3,fetch("/api/roles/update/".concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})}],n&&U(t.prototype,n),r&&U(t,r),e}();function M(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){M(a,r,o,c,i,"next",e)}function i(e){M(a,r,o,c,i,"throw",e)}c(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,c,i;return t=e,n=null,r=[{key:"getList",value:(i=H(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"get",value:(c=H(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"set",value:(a=H(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["change_user_form[_csrf_token]"]=GlobalData.csrf.change_user_form,e.next=3,fetch("/api/users/set/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"remove",value:(o=H(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&N(t.prototype,n),r&&N(t,r),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(c,e);var t,n,o,a=J(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={all_roles_list:[],user_data:{id:"",email:"",first_name:"",middle_name:"",second_name:"",roles:[]},user_id:e.user_id,without_roles:"withoutRoles"in e,errors:e.errors||[],selected_roles:[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t.changeRolesRadioHandler=function(e,n){if(!0!==t.state.without_roles){var r=n.value,o=V(t.state.selected_roles),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_roles:a})}},q.get(e.user_id).then((function(e){t.setState({selected_roles:e.getData().user.roles,user_data:e.getData().user})})),z.getList().then((function(e){t.setState({all_roles_list:e.getData().roles})})),t}return t=c,(n=[{key:"render",value:function(){var e,t=this,n=this.state,o=(n.errors,n.all_roles_list),a=n.user_data,c=n.without_roles;return r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Email:",required:"true",readOnly:c,name:"change_user_form[email]",type:"email",defaultValue:a.email,placeholder:"Введите email"}),r.createElement(l.Z.Input,{fluid:!0,label:"Отчество:",defaultValue:a.middle_name,required:"true",name:"change_user_form[middle_name]",type:"text",placeholder:"Введите отчество"}),r.createElement(l.Z.Input,{fluid:!0,label:"Имя:",defaultValue:a.first_name,required:"true",name:"change_user_form[first_name]",type:"text",placeholder:"Введите имя"}),r.createElement(l.Z.Input,{fluid:!0,label:"Фамилия:",defaultValue:a.second_name,required:"true",name:"change_user_form[second_name]",type:"text",placeholder:"Введите фамилию"}),r.createElement(l.Z.Input,{fluid:!0,label:"Введите пароль для его изменения:",name:"change_user_form[password]",type:"text",placeholder:"Введите пароль"}),r.createElement(l.Z.Input,{fluid:!0,label:"Повторите пароль для его изменения:",name:"change_user_form[re_password]",type:"text",placeholder:"Повторите пароль"}),r.createElement(u.Z,{as:"h4"},"Группы пользователя:"),(e=[],o.forEach((function(n){c?e.push(r.createElement(l.Z.Field,null,r.createElement(B.Z,{readOnly:!0,label:n.name,name:"change_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key}))):e.push(r.createElement(l.Z.Field,null,r.createElement(B.Z,{label:n.name,name:"change_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key})))})),e),r.createElement(l.Z.Button,{positive:!0},"Изменить данные:")))}}])&&$(t.prototype,n),o&&$(t,o),c}(r.Component),ee=n(2132);function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"error",value:function(e){ee.Am.error(e,{position:"top-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},{key:"success",value:function(e){ee.Am.success(e,{position:"top-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}],(n=null)&&te(t.prototype,n),r&&te(t,r),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=n(251),le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(c,e);var t,n,o,a=ce(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={global_state:e.global_state,errors:[]},t.onSubmitUserChangeForm=function(e){var n=new w(e.target).getObject();n["change_user_form[password]"]===n["change_user_form[re_password]"]?q.set(t.state.global_state.user_id,n).then((function(e){t.setState({modal_edit_user_is_open:!1}),ne.success("Данные пользователя успешно изменены"),t.initialize()})).catch((function(){ne.error("При изменении данных что-то пошло не так"),location.reload()})):ne.error("Пароли не совпадают")},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){ue(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"render",value:function(){var e=this.state,t=(e.errors,e.global_state);return r.createElement(r.Fragment,null,r.createElement(i.Z,null,r.createElement(u.Z,{as:"h1"},"Ваши данные:"),r.createElement(Y,{withoutRoles:!0,user_id:t.user_id,onSubmit:this.onSubmitUserChangeForm})))}}])&&oe(t.prototype,n),o&&oe(t,o),c}(r.Component),fe=n(692),pe=n(8237),de=n(5382),me=n(8188),ye=n(345);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(c,e);var t,n,o,a=we(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={roles:[],errors:e.errors||[],selected_roles:[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t.changeRolesRadioHandler=function(e,n){var r=n.value,o=be(t.state.selected_roles),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_roles:a})},z.getList().then((function(e){t.setState({roles:e.getData().roles})})),t}return t=c,(n=[{key:"render",value:function(){var e,t=this,n=this.state,o=(n.errors,n.roles);return r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Email:",required:!0,name:"registration_user_form[email]",type:"email",placeholder:"Введите email"}),r.createElement(l.Z.Input,{fluid:!0,label:"Отчество:",required:!0,name:"registration_user_form[middle_name]",type:"text",placeholder:"Введите отчество"}),r.createElement(l.Z.Input,{fluid:!0,label:"Имя:",required:!0,name:"registration_user_form[first_name]",type:"text",placeholder:"Введите имя"}),r.createElement(l.Z.Input,{fluid:!0,label:"Фамилия:",required:!0,name:"registration_user_form[second_name]",type:"text",placeholder:"Введите фамилию"}),r.createElement(l.Z.Input,{fluid:!0,label:"Пароль для входа:",required:!0,name:"registration_user_form[password]",type:"text",placeholder:"Введите пароль"}),r.createElement(l.Z.Input,{fluid:!0,label:"Повторите пароль:",required:!0,name:"registration_user_form[re_password]",type:"text",placeholder:"Повторите пароль"}),(e=[],o.forEach((function(n){e.push(r.createElement(l.Z.Field,null,r.createElement(B.Z,{label:n.name,name:"registration_user_form[role][".concat(n.key,"]"),checked:t.state.selected_roles.includes(n.key),onClick:t.changeRolesRadioHandler,value:n.key})))})),e),r.createElement(l.Z.Button,{positive:!0},"Зарегистрировать пользователя")))}}])&&ve(t.prototype,n),o&&ve(t,o),c}(r.Component);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=n(251),Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(c,e);var t,n,o,a=Ce(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={global_state:e.global_state,errors:[],users:[],user_id_for_update:null,user_id_for_delete:null,user_name_for_delete:null,modal_delete_user_is_open:!1,modal_edit_user_is_open:!1,modal_registration_is_open:!1},t.onSubmitUserChangeForm=function(e){var n=new w(e.target).getObject();n["change_user_form[password]"]===n["change_user_form[re_password]"]?q.set(t.state.user_id_for_update,n).then((function(e){t.setState({modal_edit_user_is_open:!1}),ne.success("Данные пользователя успешно изменены"),t.initialize()})).catch((function(){ne.error("При изменении данных что-то пошло не так"),location.reload()})):ne.error("Пароли не совпадают")},t.onSubmitRegistrationForm=function(e){var n=new w(e.target).getObject();n["registration_user_form[password]"]===n["registration_user_form[re_password]"]?k.registration(n).then((function(e){t.setState({modal_registration_is_open:!1}),ne.success("Пользователь успешно зарегистрирован"),t.initialize()})).catch((function(e){ne.error("Не удалось зарегистрировать пользователя")})):ne.error("Пароли не совпадают")},t.openModalChangeUser=function(){return t.setState({modal_edit_user_is_open:!0})},t.closeModalChangeUser=function(){return t.setState({modal_edit_user_is_open:!1})},t.openModalAddUser=function(){return t.setState({modal_registration_is_open:!0})},t.closeModalAddUser=function(){return t.setState({modal_registration_is_open:!1})},t.initialize(),t}return t=c,(n=[{key:"initialize",value:function(){var e=this;q.getList().then((function(t){e.setState({users:t.getData().users})}))}},{key:"componentDidUpdate",value:function(e){xe(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.errors,t.users),o=t.user_id_for_update,a=t.modal_registration_is_open,c=t.modal_delete_user_is_open,s=t.modal_edit_user_is_open,l=t.user_name_for_delete,f=[];return n.forEach((function(t){var n=[];t.roles_full.forEach((function(e){n.push(r.createElement(fe.Z,{color:e.color,style:{backgroundColor:e.color,color:"#ffffff"}},e.name))}));var o=1==e.state.global_state.permissions.can_edit_users?r.createElement(pe.Z,{onClick:function(){e.setState({user_id_for_update:t.id,modal_edit_user_is_open:!0})},basic:!0,color:"blue",size:"mini"},r.createElement(de.Z,{name:"edit"}),"Изменить"):"",a=1==e.state.global_state.permissions.can_compromise_passwords_users?r.createElement(pe.Z,{basic:!0,color:"violet",size:"mini"},r.createElement(de.Z,{name:"shield alternate"}),"Скомпрометировать пароли"):"",c=1==e.state.global_state.permissions.can_remove_users?r.createElement(pe.Z,{onClick:function(){e.setState({user_name_for_delete:"".concat(t.second_name," ").concat(t.first_name," ").concat(t.middle_name),user_id_for_delete:t.id,modal_delete_user_is_open:!0})},basic:!0,color:"red",size:"mini"},r.createElement(de.Z,{name:"remove"}),"Удалить"):"";f.push(r.createElement(me.Z,null,r.createElement(me.Z.Content,null,r.createElement(me.Z.Header,null,t.second_name," ",t.first_name," ",t.middle_name),r.createElement(me.Z.Meta,null,t.email),r.createElement(me.Z.Description,null,o,a,c),r.createElement(me.Z.Extra,null,n))))})),r.createElement(i.Z,null,r.createElement(u.Z,{as:"h1"},"Пользователи:"),r.createElement(me.Z.Group,{divided:!0},f),r.createElement(ye.Z,{open:a,trigger:1==this.state.global_state.permissions.can_add_users?r.createElement(pe.Z,{positive:!0,onClick:this.openModalAddUser},"Добавить пользователя"):""},r.createElement(ye.Z.Header,null,"Добавить пользователя"),r.createElement(ye.Z.Content,null,r.createElement(je,{onSubmit:this.onSubmitRegistrationForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.closeModalAddUser},"Закрыть окно"))),r.createElement(ye.Z,{open:s},r.createElement(ye.Z.Header,null,"Изменить данные пользователя"),r.createElement(ye.Z.Content,null,r.createElement(Y,{user_id:o,onSubmit:this.onSubmitUserChangeForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.closeModalChangeUser},"Закрыть окно"))),r.createElement(ye.Z,{open:c,header:"Вы действительно хотите удалить пользователя ".concat(l,"?"),actions:[{key:"no",content:"Нет",positive:!1,onClick:function(){e.setState({modal_delete_user_is_open:!1})}},{key:"done",content:"Да",positive:!0,onClick:function(){q.remove(e.state.user_id_for_delete).then((function(){e.setState({modal_delete_user_is_open:!1}),ne.success("Пользователь ".concat(l," успешно удален")),e.initialize()})).catch((function(){ne.success("Не удалось удалить пользователя - ".concat(l))}))}}]}))}}])&&Oe(t.prototype,n),o&&Oe(t,o),c}(r.Component);n(7941),n(7327),n(5003),n(9337),n(3321);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=n(251),He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(c,e);var t,n,o,a=De(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={permissionsList:e.permissionsList},t.changeRadioHandler=function(e,n){var r=n.value,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.state.permissionsList);o[r].selected=!t.state.permissionsList[r].selected,t.setState({permissionsList:o})},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){Me(e.permissionsList,this.props.permissionsList)||this.setState({permissionsList:this.props.permissionsList})}},{key:"renderPermissionsList",value:function(){var e=[];for(var t in this.state.permissionsList){var n=this.state.permissionsList[t];e.push(r.createElement(l.Z.Field,null,r.createElement(B.Z,{label:n.name,name:"permissions[".concat(t,"]"),checked:n.selected,onClick:this.changeRadioHandler,value:t})))}return e}},{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(u.Z,{as:"h4"},"Права роли:"),this.renderPermissionsList())}}])&&Be(t.prototype,n),o&&Be(t,o),c}(r.Component);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(c,e);var t,n,o,a=Ve(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[]},t.permissionsList={can_add_users:{name:"Добавление пользователей",selected:!1},can_edit_users:{name:"Редактирование пользователей",selected:!1},can_watch_users:{name:"Просмотр списка пользователей",selected:!1},can_remove_users:{name:"Удаление пользователей",selected:!1},can_create_projects:{name:"Создание проектов",selected:!1},can_compromise_passwords_users:{name:"Возможность компрометировать пароли пользователей",selected:!1}},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Идентификатор роли:",required:"true",name:"add_role_form[role_key]",type:"text",placeholder:"Введите идентификатор роли, его нельзя будет поменять после добавление роли"}),r.createElement(l.Z.Input,{fluid:!0,label:"Название роли:",required:"true",name:"add_role_form[name]",type:"text",placeholder:"Введите название роли"}),r.createElement(l.Z.Input,{fluid:!0,label:"Цвет роли:",required:"true",name:"add_role_form[color]",type:"text",placeholder:"Введите цвет роли"}),r.createElement(He,{permissionsList:this.permissionsList}),r.createElement(l.Z.Button,{positive:!0},"Добавить роль")))}}])&&qe(t.prototype,n),o&&qe(t,o),c}(r.Component);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(c,e);var t,n,o,a=tt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[],key_role_for_change:e.keyRoleForChange,role_data:{key:"",name:"",color:""},permissionsList:{can_add_users:{name:"Добавление пользователей",selected:!1},can_edit_users:{name:"Редактирование пользователей",selected:!1},can_watch_users:{name:"Просмотр списка пользователей",selected:!1},can_remove_users:{name:"Удаление пользователей",selected:!1},can_create_projects:{name:"Создание проектов",selected:!1},can_compromise_passwords_users:{name:"Возможность компрометировать пароли пользователей",selected:!1}}},z.get(t.state.key_role_for_change).then((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.state.permissionsList),r=e.getData().role;r.permissions.forEach((function(e){e in n&&(n[e].selected=!0)})),t.setState({permissionsList:n,role_data:r})})),t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){var e=this.state,t=(e.errors,e.role_data);return r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Идентификатор роли:",required:"true",readOnly:!0,defaultValue:t.key,name:"change_role_form[role_key]",type:"text",placeholder:"Введите идентификатор роли"}),r.createElement(l.Z.Input,{fluid:!0,label:"Название роли:",defaultValue:t.name,required:"true",name:"change_role_form[name]",type:"text",placeholder:"Введите название роли"}),r.createElement(l.Z.Input,{fluid:!0,label:"Цвет роли:",defaultValue:t.color,required:"true",name:"change_role_form[color]",type:"text",placeholder:"Введите цвет роли"}),r.createElement(He,{permissionsList:this.state.permissionsList}),r.createElement(l.Z.Button,{positive:!0},"Изменить роль")))}}])&&Ye(t.prototype,n),o&&Ye(t,o),c}(r.Component);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lt(e);if(t){var o=lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(c,e);var t,n,o,a=st(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={global_state:e.global_state,errors:[],roles:[],modal_add_role_is_open:!1,modal_update_role_is_open:!1,modal_delete_role_is_open:!1,role_name_for_update:null,role_key_for_update:null,role_name_for_delete:null,role_key_for_delete:null},t.onChangeRoleForm=function(e){var n=new w(e.target).getObject();z.update(n,t.state.role_key_for_update).then((function(e){t.setState({modal_update_role_is_open:!1}),ne.success("Роль успешно изменена"),t.initialize()})).catch((function(){ne.error("Не удалось изменить роль")}))},t.onAddRoleForm=function(e){var n=new w(e.target).getObject();z.add(n).then((function(e){t.setState({modal_add_role_is_open:!1}),ne.success("Роль успешно добавлена"),t.initialize()})).catch((function(){ne.error("Не удалось добавить роль")}))},t.initialize(),t}return t=c,(n=[{key:"initialize",value:function(){var e=this;z.getList().then((function(t){e.setState({roles:t.getData().roles})}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.errors,t.roles),o=t.modal_add_role_is_open,a=t.modal_delete_role_is_open,c=t.modal_update_role_is_open,s=t.role_name_for_delete,l=(t.role_name_for_update,[]);n.forEach((function(t){var n=r.createElement(fe.Z,{size:"large",color:t.color,style:{backgroundColor:t.color,color:"#ffffff"}},t.name),o=[];o.push(r.createElement(pe.Z,{onClick:function(){e.setState({role_name_for_update:t.name,role_key_for_update:t.key,modal_update_role_is_open:!0})},basic:!0,color:"blue",size:"mini"},r.createElement(de.Z,{name:"edit"}),"Изменить")),["ROLE_ADMIN","ROLE_USER"].includes(t.key)||o.push(r.createElement(pe.Z,{onClick:function(){e.setState({role_name_for_delete:t.name,role_key_for_delete:t.key,modal_delete_role_is_open:!0})},basic:!0,color:"red",size:"mini"},r.createElement(de.Z,{name:"remove"}),"Удалить")),l.push(r.createElement(me.Z,null,r.createElement(me.Z.Content,null,r.createElement(me.Z.Header,null,n),r.createElement(me.Z.Description,null,o))))}));var f=r.createElement(ye.Z,{open:c},r.createElement(ye.Z.Header,null,"Изменить роль"),r.createElement(ye.Z.Content,null,r.createElement(ot,{keyRoleForChange:this.state.role_key_for_update,onSubmit:this.onChangeRoleForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_update_role_is_open:!1})}},"Закрыть окно"))),p=r.createElement(ye.Z,{open:o,trigger:r.createElement(pe.Z,{positive:!0,onClick:function(){e.setState({modal_add_role_is_open:!0})}},"Добавить роль")},r.createElement(ye.Z.Header,null,"Добавить роль"),r.createElement(ye.Z.Content,null,r.createElement(Ke,{onSubmit:this.onAddRoleForm})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_add_role_is_open:!1})}},"Закрыть окно"))),d=r.createElement(ye.Z,{open:a,header:"Вы действительно хотите удалить роль - ".concat(s,"?"),actions:[{key:"no",content:"Нет",positive:!1,onClick:function(){e.setState({modal_delete_role_is_open:!1})}},{key:"done",content:"Да",positive:!0,onClick:function(){z.remove(e.state.role_key_for_delete).then((function(){ne.success("Роль ".concat(s," успешно удалена")),e.setState({modal_delete_role_is_open:!1}),e.initialize()}))}}]});return r.createElement(i.Z,null,r.createElement(u.Z,{as:"h1"},"Роли:"),r.createElement(me.Z.Group,{divided:!0},l),f,p,d)}}])&&ct(t.prototype,n),o&&ct(t,o),c}(r.Component),pt=(n(1058),n(4616)),dt=n(4309);function mt(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function yt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){mt(a,r,o,c,i,"next",e)}function i(e){mt(a,r,o,c,i,"throw",e)}c(void 0)}))}}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,c,i,s,u,l,f,p;return t=e,n=null,r=[{key:"addFolder",value:(p=yt(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["add_folder_form[_csrf_token]"]=GlobalData.csrf.add_folder_form,e.next=3,fetch("/projects/add/folder/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"update",value:(f=yt(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["change_project_form[_csrf_token]"]=GlobalData.csrf.change_project_form,e.next=3,fetch("/projects/update/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"updateFolder",value:(l=yt(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["change_folder_form[_csrf_token]"]=GlobalData.csrf.change_folder_form,e.next=3,fetch("/folders/update/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})},{key:"add",value:(u=yt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["add_project_form[_csrf_token]"]=GlobalData.csrf.add_project_form,e.next=3,fetch("/projects/add/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"remove",value:(s=yt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/projects/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"removeFolder",value:(i=yt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/folders/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getFolder",value:(c=yt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/folders/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"get",value:(a=yt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/projects/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"getList",value:(o=yt(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/projects/get/all/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new S(n);r.isSuccess()?e(r):t(r)})));case 7:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}],n&&ht(t.prototype,n),r&&ht(t,r),e}();function _t(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){_t(a,r,o,c,i,"next",e)}function i(e){_t(a,r,o,c,i,"throw",e)}c(void 0)}))}}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,c,i,s;return t=e,n=null,r=[{key:"getForFolder",value:(s=vt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/passwords/get/folder/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"remove",value:(i=vt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/passwords/remove/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"get",value:(c=vt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/passwords/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"update",value:(a=vt(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["change_password_form[_csrf_token]"]=GlobalData.csrf.change_password_form,e.next=3,fetch("/passwords/update/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"add",value:(o=vt(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n["add_password_form[_csrf_token]"]=GlobalData.csrf.add_password_form,e.next=3,fetch("/passwords/add/".concat(t,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(o);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})}],n&&gt(t.prototype,n),r&&gt(t,r),e}();n(3210),n(2772),n(5306);function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var St=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"string",value:function(t,n){var r=!1;if("string"==typeof t&&"string"==typeof n&&(t=t.trim(),(n=n.trim()).length>0&&(r=-1!==t.toLowerCase().indexOf(n.toLowerCase())),!1===r)){var o=e.stringToRussianKeyboard(n.toLowerCase());r=-1!==t.toLowerCase().indexOf(o.toLowerCase())}return r}},{key:"stringToRussianKeyboard",value:function(e){var t={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":"."};return e.replace(/[A-z/,.;\'\]\[]/g,(function(e){return e==e.toLowerCase()?t[e]:t[e.toLowerCase()].toUpperCase()}))}}],(n=null)&&Et(t.prototype,n),r&&Et(t,r),e}(),jt=n(1300),Pt=n(416);function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft=n(251);var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(c,e);var t,n,o,a=Rt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={passwords:e.passwords,activeFolder:e.activeFolder,canAddPasswordInActiveFolder:e.canAddPasswordInActiveFolder,canEditPasswordInActiveFolder:e.canEditPasswordInActiveFolder,onClickIconEditPassword:e.onClickIconEditPassword,onClickAddPasswordButton:e.onClickAddPasswordButton,searchStringPasswords:""},t.onChangeSearchPasswords=function(e){t.setState({searchStringPasswords:e.target.value})},t.copyText=function(e){var t=document.createElement("textarea");t.innerHTML=e;var n=document.querySelector("body");n.appendChild(t),t.select(),document.execCommand("copy"),n.removeChild(t),ne.success("Успешно скопировано")},t.renderPasswords=function(){var e=[],n=t.state.searchStringPasswords;return t.state.passwords.forEach((function(o){if(!(n.length>0)||St.string(o.name,n)||St.string(o.description,n)||St.string(o.login,n)){var a,c,i,s,u,l=1==t.state.canEditPasswordInActiveFolder?r.createElement(de.Z,{onClick:function(e){t.state.onClickIconEditPassword(e,o)},size:"small",color:"grey",link:!0,name:"edit"}):"",f=r.createElement(r.Fragment,null,r.createElement(jt.Z.Cell,null,o.tags.includes("compromised")?r.createElement(pt.Z,{content:"Пароль скомпрометирован",trigger:r.createElement(de.Z,{name:"attention"})}):"",o.tags.includes("not_working")?r.createElement(pt.Z,{content:"Пароль не актуален",trigger:r.createElement(de.Z,{name:"question circle"})}):"",o.name),r.createElement(jt.Z.Cell,null,r.createElement(de.Z,{style:{float:"right"},link:!0,color:"grey",name:"copy",onClick:function(){t.copyText(o.login)}}),o.login),r.createElement(jt.Z.Cell,null,r.createElement(de.Z,{style:{float:"right"},link:!0,color:"grey",name:"copy",onClick:function(){t.copyText(o.password)}}),r.createElement(de.Z,{style:{float:"right"},link:!0,color:"grey",name:"eye",onClick:function(){alert(o.password)}}),(a=o.password,c=3,a.length>c?a.slice(0,c)+"...":"...")),r.createElement(jt.Z.Cell,{className:"display-linebreak"},o.description),r.createElement(jt.Z.Cell,{textAlign:"center"},l,r.createElement(de.Z,{link:!0,color:"grey",name:"copy",onClick:function(){var e=document.querySelector(".active.menu-projects").innerText,n=document.querySelector(".active.menu-projects").closest(".menu").closest(".item").querySelector(".header").innerText;t.copyText("Проект: ".concat(n," \\ ").concat(e,"\n\nНазвание: ").concat(o.name,"\n\nЛогин: ").concat(o.login,"\n\nПароль: ").concat(o.password))}}))),p="";o.tags.includes("compromised")?p="negative":o.tags.includes("not_working")&&(p="warning"),e.push(r.createElement(jt.Z.Row,(u=!0,(s=p)in(i={})?Object.defineProperty(i,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[s]=u,i),f))}})),e},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){Ft(e.passwords,this.props.passwords)&&Ft(e.canAddPasswordInActiveFolder,this.props.canAddPasswordInActiveFolder)&&Ft(e.canAddPasswordInActiveFolder,this.props.canAddPasswordInActiveFolder)&&Ft(e.canEditPasswordInActiveFolder,this.props.canEditPasswordInActiveFolder)||this.setState({passwords:this.props.passwords,activeFolder:this.props.activeFolder,canEditPasswordInActiveFolder:this.props.canEditPasswordInActiveFolder,canAddPasswordInActiveFolder:this.props.canAddPasswordInActiveFolder})}},{key:"render",value:function(){var e=this.renderPasswords(),t="";return 1==this.state.canAddPasswordInActiveFolder&&(t=r.createElement(pe.Z,{onClick:this.state.onClickAddPasswordButton,positive:!0,style:{marginLeft:"10px",position:"relative",bottom:"1px"}},"Добавить пароль")),r.createElement(r.Fragment,null,r.createElement(Pt.Z,{onChange:this.onChangeSearchPasswords,placeholder:"Поиск..."}),t,r.createElement(jt.Z,{style:{display:0==e.length?"none":""},celled:!0},r.createElement(jt.Z.Header,null,r.createElement(jt.Z.Row,null,r.createElement(jt.Z.HeaderCell,null,"Название"),r.createElement(jt.Z.HeaderCell,null,"Логин"),r.createElement(jt.Z.HeaderCell,null,"Пароль"),r.createElement(jt.Z.HeaderCell,null,"Пояснение"),r.createElement(jt.Z.HeaderCell,null))),r.createElement(jt.Z.Body,null,e)))}}])&&kt(t.prototype,n),o&&kt(t,o),c}(r.Component),Tt=n(284);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var o=zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=n(251),Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(c,e);var t,n,o,a=Dt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={activeProject:e.activeProject,activeFolder:e.activeFolder,projects:e.projects,onClickIconEditFolder:e.onClickIconEditFolder,onClickIconAddFolder:e.onClickIconAddFolder,onClickIconEditProject:e.onClickIconEditProject,onChangeFolderProject:e.onChangeFolderProject,searchString:""},t.onChangeSearchProjects=function(e){t.setState({searchString:e.target.value})},t.renderMenu=function(){var e=[],n=t.state.searchString;return t.state.projects.forEach((function(o){var a=[],c=St.string(o.name,n),i=!1;if(o.folders.forEach((function(e){!1===i&&(i=St.string(e.name,n));var c=t.state.activeFolder===e.id&&t.state.activeProject===o.id,s=e.permissions.can_edit?r.createElement(de.Z,{onClick:function(n){t.state.onClickIconEditFolder(n,e)},content:"Редактировать папку",style:{marginLeft:"5px"},className:"icon_project",size:"small",color:"grey",link:!0,name:"edit"}):"";a.push(r.createElement(Tt.Z.Item,{className:"menu-projects",name:e.name,active:c},r.createElement("span",{className:"menu-projects__folder",onClick:function(n){n.preventDefault(),t.state.onChangeFolderProject(n,e,o)}},e.name),s))})),!(n.length>0)||c||i){var s=o.permissions.can_edit?r.createElement(de.Z,{onClick:function(e){t.state.onClickIconEditProject(e,o)},content:"Редактировать проект",style:{marginLeft:"5px"},className:"icon_project",size:"small",color:"grey",link:!0,name:"edit"}):"",u=o.permissions.can_edit?r.createElement(de.Z,{onClick:function(e){t.state.onClickIconAddFolder(e,o)},className:"icon_project",size:"small",color:"grey",link:!0,name:"add circle"}):"";e.push(r.createElement(Tt.Z.Item,null,r.createElement(Tt.Z.Header,null,o.name,s,u),r.createElement(Tt.Z.Menu,null,a)))}})),e},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){Mt(e.projects,this.props.projects)||this.setState({projects:this.props.projects}),Mt(e.activeFolder,this.props.activeFolder)||this.setState({activeFolder:this.props.activeFolder}),Mt(e.activeProject,this.props.activeProject)||this.setState({activeProject:this.props.activeProject})}},{key:"render",value:function(){var e=this.renderMenu();return r.createElement(r.Fragment,null,r.createElement(Pt.Z,{onChange:this.onChangeSearchProjects,className:"w100p",placeholder:"Поиск..."}),r.createElement(Tt.Z,{style:{display:0==e.length?"none":""},size:"large",vertical:!0,className:"w100p"},e),r.createElement(u.Z,{as:"h5",style:{display:0==e.length?"":"none"}},"Не найдено проектов"))}}])&&Bt(t.prototype,n),o&&Bt(t,o),c}(r.Component);function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$t(e);if(t){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wt(this,n)}}function Wt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(c,e);var t,n,o,a=Vt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название проекта:",required:"true",name:"add_project_form[name]",type:"text",placeholder:"Введите название проекта"}),r.createElement(l.Z.Button,{positive:!0},"Добавить Проект")))}}])&&qt(t.prototype,n),o&&qt(t,o),c}(r.Component);function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tn(e);if(t){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(c,e);var t,n,o,a=Yt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[]},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название папки:",required:"true",name:"add_folder_form[name]",type:"text",placeholder:"Введите название папки"}),r.createElement(l.Z.Button,{positive:!0},"Добавить папку")))}}])&&Qt(t.prototype,n),o&&Qt(t,o),c}(r.Component),rn=n(9574),on=n(1719);function an(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){an(a,r,o,c,i,"next",e)}function i(e){an(a,r,o,c,i,"throw",e)}c(void 0)}))}}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,c,i;return t=e,n=null,r=[{key:"getForProject",value:(i=cn(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/permissions/project/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getForFolder",value:(c=cn(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/permissions/folder/get/".concat(t,"/"),{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(r);n.isSuccess()?e(n):t(n)})));case 7:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"toggleForProject",value:(a=cn(regeneratorRuntime.mark((function e(t,n,r){var o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={permission:r},e.next=3,fetch("/permissions/project/toggle/".concat(t,"/").concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(c);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"toggleForFolder",value:(o=cn(regeneratorRuntime.mark((function e(t,n,r){var o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={permission:r},e.next=3,fetch("/permissions/folder/toggle/".concat(t,"/").concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new S(c);n.isSuccess()?e(n):t(n)})));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return o.apply(this,arguments)})}],n&&sn(t.prototype,n),r&&sn(t,r),e}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yn(e);if(t){var o=yn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mn(this,n)}}function mn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hn=n(251),bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(c,e);var t,n,o,a=dn(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={type:e.type,header:e.header,idType:e.idType,permissionEdit:e.permissionEdit,permissionNameEdit:e.permissionNameEdit,onClickClose:e.onClickClose,open:e.open,users:[]},t.onClickChangeItem=function(e,n,r,o){"folder"===r?un.toggleForFolder(o,n.id,t.state.permissionEdit).then((function(){t.initializeList()})).catch((function(){ne.error("Не удалось изменить право, возможно пользователь является администратором")})):"project"===r&&un.toggleForProject(o,n.id,t.state.permissionEdit).then((function(){t.initializeList()})).catch((function(){ne.error("Не удалось изменить право, возможно пользователь является администратором")}))},t.initializeList(),t}return t=c,(n=[{key:"initializeList",value:function(){var e=this;"project"===this.state.type?un.getForProject(this.state.idType).then((function(t){e.setState({users:t.getData().users})})).catch((function(){ne.error("Не удалось загрузить данные о правах для проекта")})):"folder"===this.state.type&&un.getForFolder(this.state.idType).then((function(t){e.setState({users:t.getData().users})})).catch((function(){ne.error("Не удалось загрузить данные о правах для папки")}))}},{key:"componentDidUpdate",value:function(e){hn(e.open,this.props.open)||this.setState({open:this.props.open}),hn(e.idType,this.props.idType)||this.setState({idType:this.props.idType}),hn(e.type,this.props.type)||this.setState({type:this.props.type}),hn(e.header,this.props.header)||this.setState({header:this.props.header}),hn(e.permissionEdit,this.props.permissionEdit)||this.setState({permissionEdit:this.props.permissionEdit}),hn(e.permissionNameEdit,this.props.permissionNameEdit)||this.setState({permissionNameEdit:this.props.permissionNameEdit})}},{key:"renderCheckboxList",value:function(){var e=this,t=[];return this.state.users.forEach((function(n){t.push(r.createElement("div",{style:{marginBottom:"10px"}},r.createElement(on.Z,{checked:1==n.permissions[e.state.permissionEdit],onClick:function(t){e.onClickChangeItem(t,n,e.state.type,e.state.idType)},name:"user_".concat(n.id),value:n.id,label:"".concat(n.second_name," ").concat(n.first_name," ").concat(n.middle_name)})))})),t}},{key:"render",value:function(){return r.createElement(ye.Z,{open:this.state.open},r.createElement(ye.Z.Header,null,this.state.header),r.createElement(ye.Z.Content,null,this.renderCheckboxList()),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.state.onClickClose},"Закрыть окно")))}}])&&fn(t.prototype,n),o&&fn(t,o),c}(r.Component);function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sn(e);if(t){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=n(251),Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(c,e);var t,n,o,a=wn(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={type:e.type,idType:e.idType,permissionsList:e.permissionsList,permissionEdit:null,permissionNameEdit:null,typeName:e.typeName,modal_edit_is_open:!1},t.onClickEditPermission=function(e,n){t.setState({permissionEdit:e,modal_edit_is_open:!0,permissionNameEdit:n})},t.onClickClose=function(){t.setState({modal_edit_is_open:!1})},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){jn(e.permissionsList,this.props.permissionsList)||this.setState({permissionsList:this.props.permissionsList}),jn(e.idType,this.props.idType)||this.setState({idType:this.props.idType}),jn(e.type,this.props.type)||this.setState({type:this.props.type}),jn(e.typeName,this.props.typeName)||this.setState({typeName:this.props.typeName})}},{key:"renderPermissionsList",value:function(){var e=this,t=[],n=function(n){var o=e.state.permissionsList[n];t.push(r.createElement(rn.Z.Item,{style:{cursor:"pointer"},onClick:function(){e.onClickEditPermission(n,o.name)}},r.createElement(rn.Z.Icon,{name:"edit"}),r.createElement(rn.Z.Content,null,r.createElement(rn.Z.Header,null,o.name))))};for(var o in this.state.permissionsList)n(o);return t}},{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(u.Z,{as:"h4"},"Редактирование доступов ","folder"==this.state.type?"папки":"проекта",":"),r.createElement(rn.Z,null,this.renderPermissionsList()),r.createElement(bn,{randomStringForUpdate:this.state.randomStringForUpdate,idType:this.state.idType,permissionEdit:this.state.permissionEdit,permissionNameEdit:this.state.permissionNameEdit,type:this.state.type,header:this.state.typeName+" / "+this.state.permissionNameEdit,onClickClose:this.onClickClose,open:this.state.modal_edit_is_open}))}}])&&vn(t.prototype,n),o&&vn(t,o),c}(r.Component);function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xn(e);if(t){var o=xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(c,e);var t,n,o,a=Rn(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[],folderId:e.folderId,onClickRemoveFolder:e.onClickRemoveFolder,folderData:{name:null,id:null}},t.permissionsList={can_edit:{name:"Редактирование папки"},can_watch:{name:"Просмотр папки"},can_remove:{name:"Удаление папки"},can_add_password:{name:"Добавление паролей"},can_edit_passwords:{name:"Редактирование паролей"},can_remove_passwords:{name:"Удаление паролей"}},bt.getFolder(t.state.folderId).then((function(e){t.setState({folderData:e.getData().folder})})),t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){var e=this;return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название папки:",required:"true",defaultValue:this.state.folderData.name,name:"change_folder_form[name]",type:"text",placeholder:"Введите название папки"}),r.createElement(l.Z.Button,{positive:!0},"Изменить папку"),r.createElement(l.Z.Button,{onClick:function(t){t.preventDefault(),e.state.onClickRemoveFolder(t,e.state.folderData)},negative:!0},"Удалить папку"),r.createElement(Pn,{typeName:this.state.folderData.name,permissionsList:this.permissionsList,idType:this.state.folderId,type:"folder"})))}}])&&kn(t.prototype,n),o&&kn(t,o),c}(r.Component);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var o=Dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ln(this,n)}}function Ln(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(c,e);var t,n,o,a=Bn(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[],projectId:e.projectId,onClickRemoveProject:e.onClickRemoveProject,projectData:{name:null,id:null}},bt.get(e.projectId).then((function(e){t.setState({projectData:e.getData().project})})),t.permissionsList={can_edit:{name:"Редактирование проекта"},can_watch:{name:"Просмотр проекта"},can_remove:{name:"Удаление проекта"}},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){var e=this;return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название проекта:",required:"true",defaultValue:this.state.projectData.name,name:"change_project_form[name]",type:"text",placeholder:"Введите название проекта"}),r.createElement(l.Z.Button,{positive:!0},"Изменить Проект"),r.createElement(l.Z.Button,{onClick:function(t){t.preventDefault(),e.state.onClickRemoveProject(t,e.state.projectData)},negative:!0},"Удалить Проект"),r.createElement(Pn,{typeName:this.state.projectData.name,permissionsList:this.permissionsList,idType:this.state.projectId,type:"project"})))}}])&&Tn(t.prototype,n),o&&Tn(t,o),c}(r.Component);function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gn(e);if(t){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vn=n(251),Wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(c,e);var t,n,o,a=Nn(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={onSubmit:e.onSubmit,onClickClose:e.onClickClose,open:e.open},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){Vn(e.open,this.props.open)||this.setState({open:this.props.open})}},{key:"render",value:function(){var e=this.state;return e.errors,e.users,e.modal_registration_is_open,r.createElement(ye.Z,{open:this.state.open},r.createElement(ye.Z.Header,null,"Добавить проект"),r.createElement(ye.Z.Content,null,r.createElement(Kt,{onSubmit:this.state.onSubmit})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.state.onClickClose},"Закрыть окно")))}}])&&Mn(t.prototype,n),o&&Mn(t,o),c}(r.Component),$n=n(672);function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e){return function(e){if(Array.isArray(e))return Qn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nr(e);if(t){var o=nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tr(this,n)}}function tr(e,t){return!t||"object"!==Kn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(c,e);var t,n,o,a=er(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={selected_tags:[],errors:e.errors||[]},t.changeTagsRadioHandler=function(e,n){var r=n.value,o=Jn(t.state.selected_tags),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_tags:a})},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t}return t=c,(n=[{key:"render",value:function(){return this.state.errors,r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название пароля:",required:"true",name:"add_password_form[name]",type:"text",placeholder:"Введите название пароля"}),r.createElement(l.Z.Input,{fluid:!0,label:"Логин:",name:"add_password_form[login]",type:"text",placeholder:"Введите логин"}),r.createElement(l.Z.Input,{fluid:!0,label:"Пароль:",name:"add_password_form[password]",type:"text",placeholder:"Введите пароль"}),r.createElement(l.Z.Field,{control:$n.Z,label:"Описание:",name:"add_password_form[description]",placeholder:"Введите описание"}),r.createElement(l.Z.Field,null,r.createElement(B.Z,{checked:this.state.selected_tags.includes("compromised"),onChange:this.changeTagsRadioHandler,label:"Пароль скомпрометирован",name:"add_password_form[tags][compromised]",value:"compromised"})),r.createElement(l.Z.Field,null,r.createElement(B.Z,{checked:this.state.selected_tags.includes("not_working"),onChange:this.changeTagsRadioHandler,label:"Пароль не актуален",name:"add_password_form[tags][not_working]",value:"not_working"})),r.createElement(l.Z.Button,{positive:!0},"Добавить пароль")))}}])&&Xn(t.prototype,n),o&&Xn(t,o),c}(r.Component);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ur(e);if(t){var o=ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sr(this,n)}}function sr(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lr=n(251),fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(c,e);var t,n,o,a=ir(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={folderId:e.folderId,onSubmit:e.onSubmit,onClickClose:e.onClickClose,open:e.open},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){lr(e.open,this.props.open)||this.setState({open:this.props.open}),lr(e.folderId,this.props.folderId)||this.setState({folderId:this.props.folderId})}},{key:"render",value:function(){var e=this.state;return e.errors,e.users,e.modal_registration_is_open,r.createElement(ye.Z,{open:this.state.open},r.createElement(ye.Z.Header,null,"Добавить пароль"),r.createElement(ye.Z.Content,null,r.createElement(rr,{onSubmit:this.state.onSubmit})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.state.onClickClose},"Закрыть окно")))}}])&&ar(t.prototype,n),o&&ar(t,o),c}(r.Component);function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vr(e);if(t){var o=vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _r(this,n)}}function _r(e,t){return!t||"object"!==pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(c,e);var t,n,o,a=br(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:e.errors||[],idPassword:e.idPassword,canRemovePasswordInActiveFolder:e.canRemovePasswordInActiveFolder,selected_tags:[],passwordData:{name:"",password:"",description:"",login:"",tags:[]}},wt.get(t.state.idPassword).then((function(e){t.setState({passwordData:e.getData().password,selected_tags:e.getData().password.tags})})),t.changeTagsRadioHandler=function(e,n){var r=n.value,o=dr(t.state.selected_tags),a=o.includes(r)?_.without(o,r):_.concat(o,r);t.setState({selected_tags:a})},t.onSubmit="onSubmit"in e?e.onSubmit:function(e){},t.onClickRemovePasswordButton="onClickRemovePasswordButton"in e?e.onClickRemovePasswordButton:function(e){},t}return t=c,(n=[{key:"render",value:function(){var e=this,t=(this.state.errors,1==this.state.canRemovePasswordInActiveFolder?r.createElement(l.Z.Button,{onClick:function(t){t.preventDefault(),e.onClickRemovePasswordButton(t)},negative:!0},"Удалить пароль"):"");return r.createElement(r.Fragment,null,r.createElement(l.Z,{autoComplete:"off",onSubmit:this.onSubmit},r.createElement(l.Z.Input,{fluid:!0,label:"Название пароля:",required:"true",name:"change_password_form[name]",type:"text",defaultValue:this.state.passwordData.name,placeholder:"Введите название пароля"}),r.createElement(l.Z.Input,{fluid:!0,label:"Логин:",name:"change_password_form[login]",type:"text",defaultValue:this.state.passwordData.login,placeholder:"Введите логин"}),r.createElement(l.Z.Input,{fluid:!0,label:"Пароль:",name:"change_password_form[password]",defaultValue:this.state.passwordData.password,type:"text",placeholder:"Введите пароль"}),r.createElement(l.Z.Field,{control:$n.Z,label:"Описание:",name:"change_password_form[description]",defaultValue:this.state.passwordData.description,placeholder:"Введите описание"}),r.createElement(l.Z.Field,null,r.createElement(B.Z,{checked:this.state.selected_tags.includes("compromised"),onClick:this.changeTagsRadioHandler,label:"Пароль скомпрометирован",name:"change_password_form[tags][compromised]",value:"compromised"})),r.createElement(l.Z.Field,null,r.createElement(B.Z,{checked:this.state.selected_tags.includes("not_working"),onClick:this.changeTagsRadioHandler,label:"Пароль не актуален",name:"change_password_form[tags][not_working]",value:"not_working"})),r.createElement(l.Z.Button,{positive:!0},"Изменить пароль"),t))}}])&&yr(t.prototype,n),o&&yr(t,o),c}(r.Component);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Or(e);if(t){var o=Or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pr(this,n)}}function Pr(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kr=n(251),Cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(c,e);var t,n,o,a=jr(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={idPassword:e.idPassword,onSubmit:e.onSubmit,canRemovePasswordInActiveFolder:e.canRemovePasswordInActiveFolder,onClickRemovePasswordButton:e.onClickRemovePasswordButton,onClickClose:e.onClickClose,open:e.open},t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){kr(e.open,this.props.open)&&kr(e.canRemovePasswordInActiveFolder,this.props.canRemovePasswordInActiveFolder)||this.setState({open:this.props.open,canRemovePasswordInActiveFolder:this.props.canRemovePasswordInActiveFolder}),kr(e.idPassword,this.props.idPassword)||this.setState({idPassword:this.props.idPassword})}},{key:"render",value:function(){return r.createElement(ye.Z,{open:this.state.open},r.createElement(ye.Z.Header,null,"Изменить пароль"),r.createElement(ye.Z.Content,null,r.createElement(gr,{canRemovePasswordInActiveFolder:this.state.canRemovePasswordInActiveFolder,onClickRemovePasswordButton:this.state.onClickRemovePasswordButton,idPassword:this.state.idPassword,onSubmit:this.state.onSubmit})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:this.state.onClickClose},"Закрыть окно")))}}])&&Er(t.prototype,n),o&&Er(t,o),c}(r.Component);function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tr(e);if(t){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(c,e);var t,n,o,a=Fr(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={activeProject:"projectId"in e?parseInt(e.projectId):null,activeFolder:"folderId"in e?parseInt(e.folderId):null,global_state:e.global_state,canAddPasswordInActiveFolder:!1,canEditPasswordInActiveFolder:!1,canRemovePasswordInActiveFolder:!1,name_project_for_add_folder:null,id_project_for_add_folder:null,id_project_for_change:null,id_password_for_change:null,id_folder_for_change:null,projects:[],passwords:[],modal_add_folder_is_open:!1,modal_add_project_is_open:!1,modal_change_project_is_open:!1,modal_change_folder_is_open:!1,modal_change_password_is_open:!1,modal_add_password_is_open:!1},t.onClickIconEditPassword=function(e,n){t.setState({id_password_for_change:n.id,modal_change_password_is_open:!0})},t.onClickIconEditFolder=function(e,n){t.setState({modal_change_folder_is_open:!0,id_folder_for_change:n.id})},t.onClickIconAddFolder=function(e,n){t.setState({modal_add_folder_is_open:!0,name_project_for_add_folder:n.name,id_project_for_add_folder:n.id})},t.onClickIconEditProject=function(e,n){t.setState({id_project_for_change:n.id,modal_change_project_is_open:!0})},t.onClickRemoveFolder=function(e,n){e.preventDefault(),confirm("Вы действительно хотите удалить папку - ".concat(n.name," ? Все пароли этой папки будут удалены"))&&bt.removeFolder(n.id).then((function(e){ne.error("Проект ".concat(n.name," успешно удален")),t.setState({modal_change_folder_is_open:!1}),t.initialize()})).catch((function(){ne.error("Не удалось удалить папку - ".concat(n.name))}))},t.onClickRemoveProject=function(e,n){e.preventDefault(),confirm("Вы действительно хотите удалить проект - ".concat(n.name," ? Все папки и пароли этого проекта будут удалены"))&&bt.remove(n.id).then((function(e){ne.error("Проект ".concat(n.name," успешно удален")),t.setState({modal_change_project_is_open:!1}),t.initialize()})).catch((function(){ne.error("Не удалось удалить проект - ".concat(n.name))}))},t.updatePasswords=function(){null!=t.state.activeFolder&&(bt.getFolder(t.state.activeFolder).then((function(e){var n=e.getData().folder.permissions;t.setState({canAddPasswordInActiveFolder:n.can_add_password,canRemovePasswordInActiveFolder:n.can_remove_passwords,canEditPasswordInActiveFolder:n.can_edit_passwords})})).catch((function(){ne.error("Не удалось загрузить папку")})),wt.getForFolder(t.state.activeFolder).then((function(e){0===e.getData().passwords.length&&ne.error("Не найдено паролей для текущей папки"),t.setState({passwords:e.getData().passwords})})).catch((function(){ne.error("Не удалось загрузить пароли для текущей папки"),t.initialize()})))},t.onChangeFolderProject=function(e,n,r){t.setState({activeProject:r.id,canAddPasswordInActiveFolder:n.permissions.can_add_password,canRemovePasswordInActiveFolder:n.permissions.can_remove_passwords,canEditPasswordInActiveFolder:n.permissions.can_edit_passwords,activeFolder:n.id}),history.pushState({},"Fred Security","/projects/project-".concat(r.id,"/folder-").concat(n.id,"/")),setTimeout((function(){t.updatePasswords()}),50)},t.onSubmitFormAddProject=function(e){var n=new w(e.target).getObject();bt.add(n).then((function(e){ne.success("Проект успешно создан"),t.setState({modal_add_project_is_open:!1}),t.initialize()})).catch((function(){ne.error("Не удалось добавить проект")}))},t.onClickRemovePasswordButton=function(e){confirm("Вы действительно хотите удалить пароль?")&&wt.remove(t.state.id_password_for_change).then((function(){ne.success("Пароль успешно удален"),t.onClickCloseModalChangePasword(),t.updatePasswords()})).catch((function(){ne.error("Не удалось удалить пароль")}))},t.onClickCloseModalAddProject=function(){t.setState({modal_add_project_is_open:!1})},t.onSubmitFormAddPassword=function(e){var n=new w(e.target).getObject();wt.add(t.state.activeFolder,n).then((function(){t.setState({modal_add_password_is_open:!1}),t.updatePasswords(),ne.success("Пароль успешно добавлен")})).catch((function(){ne.error("Не удалось добавить пароль")}))},t.onClickCloseModalChangeProject=function(e){t.setState({modal_change_project_is_open:!1})},t.onClickCloseModalChangePasword=function(e){t.setState({modal_change_password_is_open:!1})},t.onClickCloseModalAddPassword=function(e){t.setState({modal_add_password_is_open:!1})},t.onSubmitFormChangePassword=function(e){var n=new w(e.target).getObject();wt.update(t.state.id_password_for_change,n).then((function(){ne.success("Пароль успешно изменен"),t.onClickCloseModalChangePasword(),t.updatePasswords()})).catch((function(){ne.error("Не удалось изменить пароль")}))},t.initialize(),t.updatePasswords(),t}return t=c,(n=[{key:"initialize",value:function(){var e=this;bt.getList().then((function(t){e.setState({projects:t.getData().projects})})).catch((function(){ne.error("Не получить данные о проектах"),e.initialize()}))}},{key:"renderModals",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(Cr,{idPassword:this.state.id_password_for_change,onSubmit:this.onSubmitFormChangePassword,canRemovePasswordInActiveFolder:this.state.canRemovePasswordInActiveFolder,onClickRemovePasswordButton:this.onClickRemovePasswordButton,onClickClose:this.onClickCloseModalChangePasword,open:this.state.modal_change_password_is_open}),r.createElement(Wn,{onSubmit:this.onSubmitFormAddProject,onClickClose:this.onClickCloseModalAddProject,open:this.state.modal_add_project_is_open}),r.createElement(fr,{onSubmit:this.onSubmitFormAddPassword,onClickClose:this.onClickCloseModalAddPassword,open:this.state.modal_add_password_is_open}),r.createElement(ye.Z,{open:this.state.modal_change_project_is_open},r.createElement(ye.Z.Header,null,"Изменить проект"),r.createElement(ye.Z.Content,null,r.createElement(Un,{projectId:this.state.id_project_for_change,onClickRemoveProject:this.onClickRemoveProject,onSubmit:function(t){var n=new w(t.target).getObject();bt.update(e.state.id_project_for_change,n).then((function(t){ne.success("Проект успешно изменен"),e.setState({modal_change_project_is_open:!1}),e.initialize()})).catch((function(){ne.error("Не удалось изменить проект")}))}})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_change_project_is_open:!1})}},"Закрыть окно"))),r.createElement(ye.Z,{open:this.state.modal_change_folder_is_open},r.createElement(ye.Z.Header,null,"Изменить папку"),r.createElement(ye.Z.Content,null,r.createElement(Fn,{folderId:this.state.id_folder_for_change,onClickRemoveFolder:this.onClickRemoveFolder,onSubmit:function(t){var n=new w(t.target).getObject();bt.updateFolder(e.state.id_folder_for_change,n).then((function(t){ne.success("Папка успешно изменена"),e.setState({modal_change_folder_is_open:!1}),e.initialize()})).catch((function(){ne.error("Не удалось изменить папку")}))}})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_change_folder_is_open:!1})}},"Закрыть окно"))),r.createElement(ye.Z,{open:this.state.modal_add_folder_is_open},r.createElement(ye.Z.Header,null,"Добавить папку в проект - ",this.state.name_project_for_add_folder),r.createElement(ye.Z.Content,null,r.createElement(nn,{onSubmit:function(t){var n=new w(t.target).getObject();bt.addFolder(e.state.id_project_for_add_folder,n).then((function(t){ne.success("Папка успешно создана"),e.setState({modal_add_folder_is_open:!1}),e.initialize()})).catch((function(){ne.error("Не удалось добавить папку")}))}})),r.createElement(ye.Z.Actions,null,r.createElement(pe.Z,{onClick:function(){e.setState({modal_add_folder_is_open:!1})}},"Закрыть окно"))))}},{key:"render",value:function(){var e=this;if(null!=this.state.global_state){var t=1==this.state.global_state.permissions.can_create_projects?r.createElement(pt.Z,{content:"Добавить новый проект",trigger:r.createElement(de.Z,{onClick:function(){e.setState({modal_add_project_is_open:!0})},className:"icon_add-new-project",style:{marginLeft:"5px"},size:"small",color:"grey",link:!0,name:"add circle"})}):"";return r.createElement(r.Fragment,null,r.createElement(i.Z,null,r.createElement(u.Z,{as:"h1"},"Проекты:",t),r.createElement(dt.Z,{divided:!0},r.createElement(dt.Z.Row,null,r.createElement(dt.Z.Column,{width:4},r.createElement(Ht,{onClickIconEditFolder:this.onClickIconEditFolder,onClickIconEditProject:this.onClickIconEditProject,activeProject:this.state.activeProject,activeFolder:this.state.activeFolder,onChangeFolderProject:this.onChangeFolderProject,onClickIconAddFolder:this.onClickIconAddFolder,projects:this.state.projects})),r.createElement(dt.Z.Column,{width:12},r.createElement(It,{onClickAddPasswordButton:function(){e.setState({modal_add_password_is_open:!0})},activeFolder:this.state.activeFolder,canEditPasswordInActiveFolder:this.state.canEditPasswordInActiveFolder,canAddPasswordInActiveFolder:this.state.canAddPasswordInActiveFolder,onClickIconEditPassword:this.onClickIconEditPassword,passwords:this.state.passwords})))),this.renderModals()))}}}])&&Zr(t.prototype,n),o&&Zr(t,o),c}(r.Component);function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);if(t){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zr(this,n)}}function zr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(251);var Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(c,e);var t,n,o,a=Ur(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={errors:[]},t}return t=c,(n=[{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(i.Z,null,r.createElement(u.Z,{as:"h1"},"История действий:")))}}])&&Lr(t.prototype,n),o&&Lr(t,o),c}(r.Component);function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$r(e);if(t){var o=$r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wr(this,n)}}function Wr(e,t){return!t||"object"!==Nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kr=n(251),Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(s,e);var t,n,o,c=Vr(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).state={path:location.pathname,global_state:e.global_state},t.handlers={changeMenuItem:function(e){t.setState({path:e.target.getAttribute("href")})}},t}return t=s,(n=[{key:"componentDidUpdate",value:function(e){Kr(e.global_state,this.props.global_state)||this.setState({global_state:this.props.global_state})}},{key:"renderMenu",value:function(){var e=this.state,t=e.path,n=e.global_state,o=[];return n.user_is_auth?(o.push(r.createElement(Tt.Z.Item,{name:"cabinet",to:"/cabinet/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/cabinet/"===t},r.createElement(de.Z,{name:"user circle"}),n.user_name," ",n.user_second_name)),o.push(r.createElement(Tt.Z.Item,{name:"projects",to:"/projects/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/projects/"===t},r.createElement(de.Z,{name:"briefcase"}),"Проекты")),n.user_roles.includes("ROLE_ADMIN")&&(o.push(r.createElement(Tt.Z.Item,{name:"users",to:"/users/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/users/"===t},r.createElement(de.Z,{name:"user"}),"Пользователи")),o.push(r.createElement(Tt.Z.Item,{name:"roles",to:"/roles/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/roles/"===t},r.createElement(de.Z,{name:"users"}),"Роли")),o.push(r.createElement(Tt.Z.Item,{name:"history",to:"/history/",onClick:this.handlers.changeMenuItem,as:a.rU,active:"/history/"===t},r.createElement(de.Z,{name:"history"}),"История"))),o.push(r.createElement(Tt.Z.Item,{name:"logout",onClick:function(){location.href="/logout"},as:a.rU},r.createElement(de.Z,{name:"sign-out"}),"Выход"))):o.push(r.createElement(Tt.Z.Item,{name:"login",onClick:this.handlers.changeMenuItem,active:"/"===t},r.createElement(de.Z,{name:"sign-in"}),"Вход")),o}},{key:"render",value:function(){return r.createElement(Tt.Z,{inverted:!0,style:{backgroundColor:"#3b5eaf"}},r.createElement(i.Z,null,this.renderMenu()))}}])&&qr(t.prototype,n),o&&qr(t,o),s}(r.Component),Qr=n(7401),Xr=n(849);function Yr(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var to=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a;return t=e,n=null,r=[{key:"get",value:(o=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/global_state/get/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function c(e){Yr(a,n,r,c,i,"next",e)}function i(e){Yr(a,n,r,c,i,"throw",e)}c(void 0)}))},function(){return a.apply(this,arguments)})}],n&&eo(t.prototype,n),r&&eo(t,r),e}();function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=io(e);if(t){var o=io(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return co(this,n)}}function co(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(u,e);var t,n,o,s=ao(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).state={app_is_initialized:!1,global_state:null},to.get().then((function(e){t.setState({global_state:e,app_in_development_mode:!1,available_user_ids_for_development_mode:[4],app_is_initialized:!0})})),t}return t=u,(n=[{key:"render",value:function(){var e=this.state,t=e.app_is_initialized,n=e.global_state,o=e.app_in_development_mode;return t?o&&1==this.state.global_state.user_is_auth&&!this.state.available_user_ids_for_development_mode.includes(this.state.global_state.user_id)?(setTimeout((function(){location.reload()}),3e4),r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(i.Z,null,r.createElement(Qr.Z,{active:!0,inverted:!0},r.createElement(Xr.Z,{inverted:!0},"Идут технические работы. Страница обновится автоматически"))))):r.createElement(a.VK,null,r.createElement(Jr,{global_state:n}),r.createElement("br",null),r.createElement(c.rs,null,r.createElement(c.AW,{path:"/cabinet/"},r.createElement(le,{global_state:n})),r.createElement(c.AW,{path:"/users/"},r.createElement(Fe,{global_state:n})),r.createElement(c.AW,{path:"/roles/"},r.createElement(ft,{global_state:n})),r.createElement(c.AW,{path:"/projects/",exact:!0},r.createElement(Ar,{global_state:n})),r.createElement(c.AW,{path:"/projects/project-:projectId/folder-:folderId/",render:function(e){var t=e.match;return r.createElement(Ar,{folderId:t.params.folderId,projectId:t.params.projectId,global_state:n})}}),r.createElement(c.AW,{path:"/history/"},r.createElement(Hr,{global_state:n})),r.createElement(c.AW,{path:"/",exact:!0},r.createElement(A,{global_state:n}))),r.createElement("br",null),r.createElement(ee.Ix,null)):r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(i.Z,null,r.createElement(Qr.Z,{active:!0,inverted:!0},r.createElement(Xr.Z,{inverted:!0},"Загрузка"))))}}])&&ro(t.prototype,n),o&&ro(t,o),u}(r.Component);n(6486);o.render(r.createElement(so,null),document.getElementById("app"))},4654:()=>{}},e=>{"use strict";e.O(0,[516],(()=>{return t=4763,e(e.s=t);var t}));e.O()}]);